# MoonReader 

MoonReader 是一款集成 **高性能文档阅读**、**即时通讯** 与 **多账户邮件管理** 的全栈协作平台。项目采用现代化的前后端分离架构，旨在为小团队或个人提供一个沉浸式的办公与学习空间。

## 🌟 核心特性

### 1. 流式分片阅读器 (Novel Module)
- **大文件秒开**：摒弃传统全量加载，采用“后端流式切片 + 前端按需请求”方案，支持 GB 级别超大 TXT 文档。
- **字节级书签**：精确记录阅读位置至字节（Byte-level），支持多端（PC/移动端）无感同步续读。
- **内存零负载**：后端通过文件通道偏移量读取，极大地降低了服务器与客户端的内存占用。

### 2. 全异步即时通讯 (Chat Module)
- **实时交互**：基于 WebSocket 与 STOMP 协议，支持私聊、系统通知及图片发送。
- **状态感知**：利用 Redis 实现用户在线状态的实时追踪。
- **消息提醒**：完善的未读消息计数与即时推送机制。

### 3. 多账户邮件中心 (Email Module)
- **标准协议支持**：支持 QQ 邮箱、163 邮箱等主流 SMTP/POP3 服务。
- **异步同步引擎**：基于 Java 线程池 (JUC) 的异步拉取逻辑，同步邮件时不阻塞用户其他操作。
- **富文本编辑**：支持撰写并发送带有格式的富文本邮件。

### 4. 管理员中枢 (Admin Module)
- **用户治理**：完善的权限管理，支持实时封禁违规用户（通过 Redis Token 销毁实现强制下线）。
- **内容维护**：管理员专属的小说/文档上传接口。
- **操作审计**：系统日志记录所有关键操作，确保环境安全合规。

---

## 🛠 技术选型

### 前端
- **框架**: React 18 + TypeScript
- **构建工具**: Vite
- **状态管理**: 精细化组件状态管理
- **适配**: 移动端初步适配

### 后端
- **核心框架**: Spring Boot 3.4.1
- **数据库**: MySQL 8.0
- **缓存/消息**: Redis (Token 校验、在线状态、高频书签)
- **持久层**: MyBatis
- **通信协议**: WebSocket (STOMP), HTTP/1.1
- **并发处理**: ThreadPoolExecutor (JUC)

---

## 🗄 数据库设计

系统核心由 8 张表组成，通过索引优化确保在百万级记录下仍保持毫秒级响应：

- `sys_user`: 用户表（角色、状态、头像）
- `sys_novel`: 文档信息表
- `sys_novel_bookmark`: 字节级书签表
- `sys_chat_msg`: 聊天记录表（支持文本与图片路径）
- `sys_friend`: 社交关系表
- `sys_email_config`: 邮件服务配置表
- `sys_email`: 邮件收件箱缓存表
- `sys_log`: 系统操作审计日志表

---

## 🚀 快速开始

### 后端配置
1. 创建 MySQL 数据库并执行 `sql/init.sql`。
2. 修改 `application.yml` 中的数据库连接信息与 Redis 地址。
3. 运行 `MoonReaderApplication`。

### 前端配置
1. 进入 `frontend` 目录。
2. 执行 `npm install`。
3. 执行 `npm run dev` 启动开发服务器。

---

## 📸 界面预览

- **阅览室**：卡片式书架，支持搜索与上架管理。
- **聊天室**：简洁的一对一聊天界面，集成在线状态标识。
- **邮件中心**：仿标准邮箱布局，支持同步与收发。
- **后台管理**：可视化操作日志与用户状态控制。

---

## 📄 许可证

本项目基于 MIT 协议开源。
